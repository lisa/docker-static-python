branches:
  only:
  # Versioning for Python is a mess (see https://www.python.org/dev/peps/pep-0440/)
  # so we'll just focus on the master branch and the major versions
  # currently in the format major.minor.patch. If Python changes their format
  # I'll update this.
  - /^\d{1,}\.\d{1,}\.\d{1,}.*/
  - master

sudo: required
language: c

services:
  - docker

before_script:
  - echo "Log into docker hub"
  - echo $DOCKER_PASS | docker login -u $DOCKER_USER --password-stdin

script:
  - ./travis-build-scripts/build_image.sh
  
after_success:
  # Don't publish for pull requests?
  - if [[ -z $TRAVIS_PULL_REQUEST && $TRAVIS_EVENT_TYPE != "cron" ]]; then ./travis-build-scripts/publish_image.sh; fi

